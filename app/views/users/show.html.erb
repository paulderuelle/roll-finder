<div class="profile-global-container">

  <% if current_user %>
    <div class="profile-btn-container">
      <div class="btn-profile btn-edit">
        <%= link_to destroy_user_session_path, data: { turbo_method: :delete } do %>
          <% concat content_tag(:i, "", class: "fa-solid fa-power-off fa-sm") %>
        <% end %>
      </div>
      <div class="btn-profile btn-logout">
        <%= link_to edit_user_path(current_user), class: "edit" do %>
          <% concat content_tag(:i, "", class: "fa-solid fa-pencil fa-sm") %>
        <% end %>
      </div>
    </div>
  <% end %>

  <div class="profile-details">
    <p><%= @user.nickname %></p>
    <p><%= @user.first_name %></p>
    <% if @reviews.present? %>
      <p>Average Rating: <%= @reviews.average(:rating) %> Reviews: <%= @reviews.count %></p>
      <%# Insert a link_to "reviews_index" AJAX %>
    <% else %>
      <p>No reviews available.</p>
    <% end %>
  </div>

  <div class="profile-highlights">
    <%# Insert avatar %>
    <%# Insert stars %>
    <p><%= @user.description %></p>

  </div>
  <% if current_user != @user %>
    <div class="btn-main btn-chat">
      <%= link_to "Chat with #{@user.first_name}", chatroom_path(user_id: @user.id), class: "chatroom" %>
    </div>
  <% end %>

  <div class="profile-stats">
    <%= "Created {events.all?} game events" %>
    <%= "Appeared in {??} game events" %>
    <br>
    <i class="fa-solid fa-circle-chevron-down"></i>
    <br>
    <% @user == current_user ? stats_user_text = "You are" : stats_user_text = "#{ @user.first_name } is" %>
    <% stats_event_text = @user.events.count > 1 ? "games events" : "game event" %>
    <%= "#{stats_user_text} hosting #{@user.events.count} #{stats_event_text}" %>
  </div>

  <div class="profile-events-cards">
    <%# Insert events cards %>
  </div>
</div>
