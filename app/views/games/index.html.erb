<h1>What game do you want to play?</h1>

<%= form_with url: show_games_path, method: :get, class: 'search-form' do |f| %>
  <%= f.text_field :search_query, placeholder: 'Search a game', value: @search_query %>
  <%= f.submit 'Search' %>
<% end %>

<div class="event-index" data-controller="event-carousel">
  <div class="arrow left" data-action="click->event-carousel#scrollPrevious"
    data-event-index-target="arrowLeft">
    <i class="fa-solid fa-chevron-left"></i>
  </div>
  <div class="arrow right" data-action="click->event-carousel#scrollNext"
    data-event-index-target="arrowRight">
    <i class="fa-solid fa-chevron-right"></i>
  </div>

  <% if @games.present? %>
    <div class="scrolling-events" data-event-index-target="list">
    <% @games.each_with_index do |game, index| %>
      <div id="init<%= index %>" class="event-list card<%= index <= 4 ? index : 4 %> index-card" data-event-carousel-target="card">
        <%= image_tag game.image_url, alt: game.name, class: "card-image" if game.image_url.present? %>
        <div class="card-title">
          <h3><%= game.name %></h3>
        </div>
        <div class="card-info">
          <p><strong>Max Players:</strong> <%= game.max_players %></p>
          <p><strong>Playing Time:</strong> <%= game.duration %> minutes</p>
        </div>
        <%= button_to "Create an Event!", new_event_path, method: :get, class: 'deck-button', params: { game_name: game.name, year_published: game.publish_year, min_players: game.min_players, max_players: game.max_players, playing_time: game.duration, description: game.description, image_url: game.image_url } %>
      </div>
    <% end %>
    </div>
  <% else %>
    <p>You haven't added any games yet.</p>
  <% end %>
</div>
